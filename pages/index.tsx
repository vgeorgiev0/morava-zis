import Head from "next/head";
import { useState, useEffect } from "react";
import { GetStaticProps } from "next";
import Banner from "components/Banner";
import Link from "next/link";
import { useTranslation, Trans } from "next-i18next";
import { serverSideTranslations } from "next-i18next/serverSideTranslations";
import Services from "components/Services";
import Card from "components/Card";
import cardImage from "../public/images/img4.jpg";

export const getStaticProps: GetStaticProps = async ({ locale }) => {
  return {
    props: {
      ...(await serverSideTranslations(locale ?? "en", [
        "common",
        "navigation",
      ])),
    },
  };
};

interface HomeProps {
  _nextI18Next: {
    initialLocale: string;
  };
}

const Home: React.FC<HomeProps> = ({ _nextI18Next }) => {
  const [locale, setLocale] = useState<string>();

  useEffect(() => {
    setLocale(_nextI18Next.initialLocale);
  }, [_nextI18Next.initialLocale]);

  const { t } = useTranslation("common");
  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className="-mt-24 mb-6">
        <Banner title={t("mainTitle")} subtitle={t("mainSubtitle")}>
          <Link locale={locale} href="/apartments" className="btn-primary">
            <button className="capitalize tracking-widest">{t("btn1")}</button>
          </Link>
        </Banner>
      </div>
      <Services>
        <Card imageSrc={cardImage} />
        <Card imageSrc={cardImage} />
        <Card imageSrc={cardImage} />
        <Card imageSrc={cardImage} />
      </Services>
    </div>
  );
};

export default Home;
